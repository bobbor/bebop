!function(a,b){"function"==typeof define&&define.amd?define(["exports"],function(c){a.bebop=b(a,c)}):"undefined"!=typeof exports?b(a,exports):a.bebop=b(a,{})}(self,function(a,b){function c(a,b){return(typeof b)[0]===a}function d(a,b){return b instanceof a}function e(a,b,c){var d,e,f=b+"Sibling";for("string"==typeof c?(e=v.all(c,a.parentNode),d=function(a){var b=!1;return e.forEach(function(c){a===c._node&&(b=!0)}),b}):d=c?function(a){return c(new y(a))}:function(){return!0};a&&(a=a[f],!a||1!==a.nodeType||!d(a)););return a?new y(a):null}function f(a){var b={"float":"cssFloat"};return b[a]&&(a=b[a]),a}function g(a){for(var b=a.length,c={};b--;)c[a[b].name]=a[b].value;return c}function h(a,b){this._e=a,this.originalTarget=new y(a.target),this.target=new y(a.target)}function i(){this._cached={},this._eventData=[]}function j(){function a(){return function(a){for(a=0;4>a;a++)try{return a?new ActiveXObject([,"Msxml2","Msxml3","Microsoft"][a]+".XMLHTTP"):new XMLHttpRequest}catch(b){}}()}function b(b,e){function f(){var a={url:h.responseURL||j.url,status:h.status};if("json"===j.type)try{a.data=JSON.parse(h.responseText)}catch(b){a.data=h.responseText}else"html"===j.type?a.data=v.create(h.responseText):a.data=h.responseText;return a}function g(){return new B(function(a,b){h.onload=function(){var b=f();c.set(j.url,{ok:!0,res:b,req:h}),a({res:b,req:h})},h.onerror=function(){var a=f();c.set(j.url,{ok:!1,res:a,req:h}),b({res:a,req:h})},h.send(j.data&&!i?j.data:null)})}var h,i=/^\b(GET|HEAD)\b$/.test(b),j=u({data:{},head:{}},e);if(j.bust&&c.del(j.url),c.has(j.url))return new B(function(a,b){var d=c.get(e.url);d.ok?a({res:d.res,req:d.req}):b({res:d.res,req:d.req})});h=a(),d(FormData,j.data)||(j.data=Object.keys(j.data).map(function(a){return a+"="+j.data[a]}).join("&")),i&&(j.url+="?"+j.data),h.open(b,j.url),h.setRequestHeader("X-Requested-With","bebop.io"),i||h.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var k in j.head)h.setRequestHeader(k,j.head[k]);switch(j.type){case"json":h.setRequestHeader("Accept","application/json, text/javascript");break;case"html":h.setRequestHeader("Accept","text/html");break;case"xml":h.setRequestHeader("Accept","application/xml, text/xml");break;case"text":h.setRequestHeader("Accept","text/plain");break;default:h.setRequestHeader("Accept","*/".concat("*"))}return g()}var c=function(){var a={};return{has:function(b){return b in a},set:function(b,c){a[b]=c},get:function(b){return a[b]},del:function(b){return delete a[b]}}}();this.post=function(a){return b("POST",a)},this.get=function(a){return b("GET",a)},this.put=function(a){return b("PUT",a)},this.del=function(a){return b("DELETE",a)},this.head=function(a){return b("HEAD",a)}}var k={}.hasOwnProperty,l=[].slice,m=a.document,n=(m.documentElement,m.body),o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||function(a){for(var b=this,c=(b.document||b.ownerDocument).querySelectorAll(a),d=0;c[d]&&c[d]!==b;)d++;return c[d]?!0:!1},p="f",q="o",r="s",s="u";b.VERSION="1.0.5";var t=b.uuid=function(){var a=0;return function(){return a++,a.toString(16)}}(),u=function(){var a,b={}.hasOwnProperty,c=Array.prototype.slice.call(arguments),d=c.shift();a=c.length>1?u.apply(this,c):c[0];for(var e in a)b.call(a,e)&&(d[e]=a[e]);return d},v={create:function(a){var b=m.createElement("div");return b.innerHTML=a,new y(b.childNodes[0])},one:function(a,e){if(e=d(b.Element,e)?e._node:e,null===a)return null;if(c(r,a)){var f=(e||m).querySelectorAll(a);return 0===f.length?null:new y(f[0])}return a&&a._node?a:new y(a)},all:function(a,c){return c=d(b.Element,c)?c._node:c,new z((c||m).querySelectorAll(a))}};u(b,v);var w={$:a.$,bebop:a.bebop},x=function(c){return c&&(a.bebop=w.bebop),a.$=w.$,b};u(b,{noConflict:x});var y=b.Element=function(a){this._node=a};u(y.prototype,{uuid:function(){return this._node.id||(this._node.id="node_"+t()),this._node.id},ancestors:function(){var a=[],b=this._node;do a.push(b);while(b=b.parentNode);return new z(a)},matches:function(a){return c(r,a)&&this._node!==m?o.call(this._node,a):this.is(a)},is:function(a){return a=a instanceof y?a:new y(a),a._node===this._node},closest:function(a){if("closest"in this._node&&c(r,a)){var b=this._node.closest(a);return b?new y(b):null}for(var d,e=this.ancestors(),f=0;f<e.size();f++)if(d=e.item(f),d.matches(a))return d;return null},parent:function(){return new y(this._node.parentNode)},next:function(a){return e(this._node,"next",a)},prev:function(a){return e(this._node,"previous",a)},hasClass:function(a){return this._node.classList.contains(a)},addClass:function(a){return this._node.classList.add(a),this},removeClass:function(a){return this._node.classList.remove(a)},toggleClass:function(a){return this._node.classList.toggle(a)},data:function(a,b){if(c(s,a)){var d=this.attr();return Object.keys(d).reduce(function(a,b){return/^data\-/.test(b)&&(a[b.replace(/^data\-/,"")]=d[b]),a},{})}return c(s,b)?this._node.getAttribute("data-"+a):c(p,b)?void 0:(this._node.setAttribute("data-"+a,b),this)},rmData:function(a){return this.rmAttr("data-"+a),this},prop:function(a,b){return c(s,a)?null:c(s,b)?"parentNode"===a?this.parent():this._node[a]:(this._node[a]=b,this)},attr:function(a,b){return c(s,a)?g(this._node.attributes):c(s,b)?this._node.getAttribute(a):(this._node.setAttribute(a,b),this)},hasAttr:function(a){return this._node.hasAttribute(a)},rmAttr:function(a){return this._node.removeAttribute(a),this},getStyle:function(a){if(!this.hasAttr("style"))return null;a=f(a);var b=this._node.style[a];return b?b:null},removeStyle:function(a){return this.removeStyles(a)},removeStyles:function(a){"string"==typeof a&&(a=[a]);var b,c,d=a.length;for(b=0;d>b;b+=1)c=f(a[b]),this._node.style[c]=null;return this},setStyle:function(a,b){var c={};return c[a]=b,this.setStyles(c)},setStyles:function(a){this.hasAttr("style")||this.attr("style","");for(var b in a)if(k.call(a,b)){var c=f(b);this._node.style[c]=a[b]}return this},computeCss:function(a){var b,c,d=m.defaultView.getComputedStyle(this._node),e={};if("string"==typeof a)return d[a];for(b=0;c=a[b];b++)e[c]=d[c];return e},serialize:function(){for(var a,b=[],c=this._node.elements,d=0;a=c[d];d++)a.disabled||"submit"===a.type||"image"===a.type||a.name&&a.name.length>0&&("checkbox"===a.type||"radio"===a.type?a.checked&&b.push(a.name+"="+encodeURIComponent(a.value)):b.push(a.name+"="+encodeURIComponent(a.value)));return b.join("&")},empty:function(){return this._node.innerHTML="",this},html:function(a){return c(s,a)?this._node.innerHTML:(this._node.innerHTML=a,this)},text:function(a){return c(s,a)?this._node.textContent:(this._node.textContent=a,a)},append:function(a){return c(r,a)?a=v.create(a)._node:a instanceof y&&(a=a._node),this._node.appendChild(a),this},appendTo:function(a){var b=a instanceof y?a:v.one(a);return b.append(this),this},prepend:function(a){c(r,a)?a=v.create(a)._node:a instanceof y&&(a=a._node);var b=this.one("*");return this._node.insertBefore(a,b&&b._node?b._node:null),this},prependTo:function(a){var b=a instanceof y?a:v.one(a);return b.prepend(this),this},insertBefore:function(a){return a=a instanceof y?a:v.one(a),a._node.parentNode.insertBefore(this._node,a._node),this},insertAfter:function(a){a=a instanceof y?a:v.one(a);var b=a.next();return a._node.parentNode.insertBefore(this._node,b?b._node:null),this},after:function(a){return c(r,a)&&(a=v.create(a)),a.insertAfter(this),this},before:function(a){return c(r,a)&&(a=v.create(a)),a.insertBefore(this),this},remove:function(){return this._node.parentNode.removeChild(this._node),this},one:function(a){return v.one(a,this._node)},all:function(a){return v.all(a,this._node)},click:function(){var b=m.createEvent("MouseEvents");return b.initMouseEvent("click",!0,!0,a,0,0,0,0,0,!1,!1,!1,!1,0,null),!this._node.dispatchEvent(b)},addEventListener:function(a,b){return this._node.addEventListener(a,b,!1)},removeEventListener:function(a,b){return this._node.removeEventListener(a,b,!1)},on:function(a,b,c,d){return A.on(this,a,b,c,d)},once:function(a,b,c,d){return A.on(this,a,b,c,d,!0)},off:function(a,b){return A.off(this,a,b)},purge:function(a,b,c){var d=A;for(var e in d._cached)for(var f=0,g=d._cached[e].length;g>f;f++){var h=d._cached[e][f];this._node!==h.obj._node||a&&a!==h.type||d.off(h.obj,h.type,h.raw)}c&&this.all("*").forEach(function(d){d.purge(a,b,c)})},fire:function(a){A._eventData=l.call(arguments,1);var b=m.createEvent("UIEvents");b.initEvent(a,!0,!1),this._node.dispatchEvent(b)}});var z=b.ElementList=function(a){function b(a){return function(){for(d=0;e=i.nodes[d];d++)e[a].apply(e,arguments);return i}}var c,d,e,f,g=[];for(c=0;e=a[c];c++)g.push(new y(e));this.nodes=g;var h=["remove","addClass","removeClass","toggleClass","prop","attr","setStyle","setStyles","removeStyle","removeStyles"],i=this;for(c=0;f=h[c];c++)this[f]=b(f)};u(z.prototype,{forEach:function(a){return this.nodes.forEach(a)},map:function(a){return this.nodes.map(a)},reduce:function(a,b){return this.nodes.reduce(a,b)},item:function(a){return c(s,a)?null:this.nodes[a]},size:function(){return this.nodes.length},get:function(a){var b=this.nodes.map(function(a){return a._node});return"undefined"!=typeof a?b[a]:b}}),h.prototype={pageX:function(){return this._e.pageX},pageY:function(){return this._e.pageY},code:function(){return this._e.keyCode},stop:function(){return this.noBubble().noDefault()},noDefault:function(){return this._e.preventDefault(),this},noBubble:function(){return this._e.stopPropagation(),this}},i.prototype={_getEventCallback:function(a,b,c,d,e,f){var g="cb_"+t();c.__uid=g;var i=this,j=g,k=function(e){var g,i=new h(e),j=arguments.callee,k=function(d){A._eventData.unshift(d),c.apply(a,A._eventData),A._eventData=[],f&&a.removeEventListener(b,j)};return d?void a.all(d).forEach(function(a){g=new h(e);for(var b=!0,c=v.one("html");a._node!==g.target._node;){if(g.target._node===c._node){b=!1;break}g.target=g.target.parent()}b&&k(g)}):void k(i)};return i._cached[j]=i._cached[j]||[],i._cached[j].push({type:b,obj:a,fn:k,raw:c}),k},on:function(a,b,c,d,e,f){return a.addEventListener(b,this._getEventCallback.apply(this,arguments)),a},off:function(a,b,c){var d,e,f;if(!c)throw new Error("no callback defined");if(d=c.__uid,!this._cached[d])throw new Error("no such callback");for(e=0,f=this._cached[d].length;f>e;e++)this._cached[d][e].raw===c&&a.removeEventListener(b,this._cached[d][e].fn)},ready:function(b){var c=!1,d=m.attachEvent?"attachEvent":"addEventListener",e=m.attachEvent?"detachEvent":"removeEventListener",f=m.attachEvent?"on":"",g=function(d){("readystatechange"!==d.type||"complete"===m.readyState)&&(("load"===d.type?a:m)[e](f+d.type,g,!1),!c&&(c=!0)&&b.call(a,d.type))};"complete"===m.readyState?b.call(a,"lazy"):(m[d](f+"DOMContentLoaded",g,!1),m[d](f+"readystatechange",g,!1),a[d](f+"load",g,!1))}};var A=new i;b.ready=A.ready;var B=b.Promise=function(){function a(a,b,d,e,f){setTimeout(function(){try{e=f(e),f=e&&c(q,e)|c(p,e)&&e.then,c(p,f)?e===a?d(TypeError()):f.call(e,b,d):b(e)}catch(g){d(g)}},0)}function b(a){return d(function(b){b(a)})}var d=function(b,d){return d=function e(f,g,h,i,j,k){function l(a){return function(b){j&&(j=0,e(c,a,b))}}if(i=e.q,f!==c)return B(function(a,b){i.push({p:this,r:a,j:b,1:f,0:g})});if(h&&c(p,h)|c(q,h))try{j=h.then}catch(m){g=0,h=m}if(c(p,j))try{j.call(h,l(1),g=l(0))}catch(m){g(m)}else for(d=function(d,e){return c(p,d=g?d:e)?B(function(b,c){a(this,b,c,h,d)}):b},k=0;k<i.length;)j=i[k++],c(p,f=j[g])?a(j.p,j.r,j.j,h,f):(g?j.r:j.j)(h)},d.q=[],b.call(b={then:function(a,b){return d(a,b)},"catch":function(a){return d(0,a)}},function(a){d(c,1,a)},function(a){d(c,0,a)}),b};return d.resolve=b,d.reject=function(a){return d(function(b,c){c(a)})},d.all=function(a){return d(function(c,d,e,f){f=[],e=a.length||c(f),a.map(function(a,g){b(a).then(function(a){f[g]=a,--e||c(f)},d)})})},d}();return b.io=new j,a.$=b,b});